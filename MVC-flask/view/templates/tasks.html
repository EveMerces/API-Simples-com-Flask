{% extends "base.html" %}

{% block content %}
<h2>Minhas Tarefas</h2>
<a href="{{ url_for('create_task') }}" class="link">+ Nova Tarefa</a> | 
<a href="{{ url_for('index') }}" class="link">Voltar para usuÃ¡rios</a>
<table border="1" cellpadding="5">
    <tr>
        <th>TÃ­tulo</th>
        <th>DescriÃ§Ã£o</th>
        <th>Status</th>
        <th>UsuÃ¡rio</th>
        <th>AÃ§Ãµes</th>
    </tr>
    {% for task in tasks %}
    <tr>
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.user.name }}</td>
        <td>
            <div class="actions">
                <!-- FormulÃ¡rio para atualizar status -->
                <form action="{{ url_for('update_task_status', task_id=task.id) }}" method="post" style="display:inline;">
                    {% if task.status == 'Pendente' %}
                        <button type="submit" class="btn-success">âœ… Entregar</button>
                    {% elif task.status == 'ConcluÃ­do' %}
                        <button type="submit">ğŸ”„ Reabrir</button>
                    {% endif %}
                </form>

                <!-- FormulÃ¡rio para excluir -->
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn-danger">ğŸ—‘ï¸ Excluir</button>
                </form>
            </div>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}